<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Request Context - </title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Request Context</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Request Context" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/request.html" /> <meta property="og:url" content="http://localhost:4000/docs/request.html" /> <script type="application/ld+json"> {"url":"http://localhost:4000/docs/request.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/just-the-docs.png"}},"headline":"Request Context","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/configuration.html" class="nav-list-link">Configuration</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/rdb.html" class="nav-list-link">Readonly Database</a></li><li class="nav-list-item active"><a href="http://localhost:4000/docs/request.html" class="nav-list-link active">Request Context</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/routing.html" class="nav-list-link">Routing</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/why-evo.html" class="nav-list-link">Why EVO?</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/search.html" class="nav-list-link">Search</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/index-test.html" class="nav-list-link">Markdown kitchen sink</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <p>EVO Request context is the upgraded version of <a href="https://github.com/gofiber/docs/blob/master/ctx.md">fiber.Context</a> with extra features.</p><hr /> <p>The Request struct represents the Context which hold the HTTP request and response. It has methods for the request query string, parameters, body, HTTP headers and so on. —</p> <h1 id="request"> <a href="#request" aria-labelledby="request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request </h1> <h2 id="accepts"> <a href="#accepts" aria-labelledby="accepts" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accepts </h2> <p>Checks, if the specified <strong>extensions</strong> or <strong>content</strong> <strong>types</strong> are acceptable.</p> <p>Based on the request’s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">Accept</a> HTTP header.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="n">types</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>                 <span class="kt">string</span>
<span class="n">request</span><span class="o">.</span><span class="n">AcceptsCharsets</span><span class="p">(</span><span class="n">charsets</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>      <span class="kt">string</span>
<span class="n">request</span><span class="o">.</span><span class="n">AcceptsEncodings</span><span class="p">(</span><span class="n">encodings</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>    <span class="kt">string</span>
<span class="n">request</span><span class="o">.</span><span class="n">AcceptsLanguages</span><span class="p">(</span><span class="n">langs</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>        <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Accept: text/*, application/json</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"html"</span><span class="p">)</span>             <span class="c">// "html"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"text/html"</span><span class="p">)</span>        <span class="c">// "text/html"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"json"</span><span class="p">,</span> <span class="s">"text"</span><span class="p">)</span>     <span class="c">// "json"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">)</span> <span class="c">// "application/json"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"image/png"</span><span class="p">)</span>        <span class="c">// ""</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Accepts</span><span class="p">(</span><span class="s">"png"</span><span class="p">)</span>              <span class="c">// ""</span>
<span class="p">})</span>
</code></pre></div></div> <p>EVO provides similar functions for the other accept headers.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Accept-Charset: utf-8, iso-8859-1;q=0.2</span>
<span class="c">// Accept-Encoding: gzip, compress;q=0.2</span>
<span class="c">// Accept-Language: en;q=0.8, nl, ru</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">AcceptsCharsets</span><span class="p">(</span><span class="s">"utf-16"</span><span class="p">,</span> <span class="s">"iso-8859-1"</span><span class="p">)</span> 
  <span class="c">// "iso-8859-1"</span>

  <span class="n">request</span><span class="o">.</span><span class="n">AcceptsEncodings</span><span class="p">(</span><span class="s">"compress"</span><span class="p">,</span> <span class="s">"br"</span><span class="p">)</span> 
  <span class="c">// "compress"</span>

  <span class="n">request</span><span class="o">.</span><span class="n">AcceptsLanguages</span><span class="p">(</span><span class="s">"pt"</span><span class="p">,</span> <span class="s">"nl"</span><span class="p">,</span> <span class="s">"ru"</span><span class="p">)</span> 
  <span class="c">// "nl"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="append"> <a href="#append" aria-labelledby="append" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Append </h2> <p>Appends the specified <strong>value</strong> to the HTTP response header field.</p> <p>If the header is <strong>not</strong> already set, it creates the header with the specified value.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">values</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">"Link"</span><span class="p">,</span> <span class="s">"http://google.com"</span><span class="p">,</span> <span class="s">"http://localhost"</span><span class="p">)</span>
  <span class="c">// =&gt; Link: http://localhost, http://google.com</span>

  <span class="n">request</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">"Link"</span><span class="p">,</span> <span class="s">"Test"</span><span class="p">)</span>
  <span class="c">// =&gt; Link: http://localhost, http://google.com, Test</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="attachment"> <a href="#attachment" aria-labelledby="attachment" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attachment </h2> <p>Sets the HTTP response <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition</a> header field to <code class="language-plaintext highlighter-rouge">attachment</code>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Attachment</span><span class="p">(</span><span class="n">file</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Attachment</span><span class="p">()</span>
  <span class="c">// =&gt; Content-Disposition: attachment</span>

  <span class="n">request</span><span class="o">.</span><span class="n">Attachment</span><span class="p">(</span><span class="s">"./upload/images/logo.png"</span><span class="p">)</span>
  <span class="c">// =&gt; Content-Disposition: attachment; filename="logo.png"</span>
  <span class="c">// =&gt; Content-Type: image/png</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="app"> <a href="#app" aria-labelledby="app" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> App </h2> <p>Returns the <a href="app.md#new">*App</a> reference so you could easily access all application settings.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">App</span><span class="p">()</span> <span class="o">*</span><span class="n">App</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/bodylimit"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">bodylimit</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="n">Settings</span><span class="o">.</span><span class="n">BodyLimit</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">bodylimit</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="baseurl"> <a href="#baseurl" aria-labelledby="baseurl" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> BaseURL </h2> <p>Returns base URL (<strong>protocol</strong> + <strong>host</strong>) as a <code class="language-plaintext highlighter-rouge">string</code>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">BaseURL</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET https://example.com/page#chapter-1</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">BaseURL</span><span class="p">()</span> <span class="c">// https://example.com</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="body"> <a href="#body" aria-labelledby="body" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Body </h2> <p>Contains the <strong>raw body</strong> submitted in a <strong>POST</strong> request.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Body</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// curl -X POST http://localhost:8080 -d user=john</span>

<span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Get raw body from POST request:</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Body</span><span class="p">()</span> <span class="c">// user=john</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="bodyparser"> <a href="#bodyparser" aria-labelledby="bodyparser" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> BodyParser </h2> <p>Binds the request body to a struct. <code class="language-plaintext highlighter-rouge">BodyParser</code> supports decoding query parameters and the following content types based on the <code class="language-plaintext highlighter-rouge">Content-Type</code> header:</p> <ul> <li><code class="language-plaintext highlighter-rouge">application/json</code></li> <li><code class="language-plaintext highlighter-rouge">application/xml</code></li> <li><code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code></li> <li><code class="language-plaintext highlighter-rouge">multipart/form-data</code></li> </ul> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">BodyParser</span><span class="p">(</span><span class="n">out</span> <span class="k">interface</span><span class="p">{})</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Field names should start with an uppercase letter</span>
<span class="k">type</span> <span class="n">Person</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">Name</span> <span class="kt">string</span> <span class="s">`json:"name" xml:"name" form:"name" query:"name"`</span>
    <span class="n">Pass</span> <span class="kt">string</span> <span class="s">`json:"pass" xml:"pass" form:"pass" query:"pass"`</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">p</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">BodyParser</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span> <span class="c">// john</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Pass</span><span class="p">)</span> <span class="c">// doe</span>
<span class="p">})</span>
<span class="c">// Run tests with the following curl commands</span>

<span class="c">// curl -X POST -H "Content-Type: application/json" --data "{\"name\":\"john\",\"pass\":\"doe\"}" localhost:3000</span>

<span class="c">// curl -X POST -H "Content-Type: application/xml" --data "&lt;login&gt;&lt;name&gt;john&lt;/name&gt;&lt;pass&gt;doe&lt;/pass&gt;&lt;/login&gt;" localhost:3000</span>

<span class="c">// curl -X POST -H "Content-Type: application/x-www-form-urlencoded" --data "name=john&amp;pass=doe" localhost:3000</span>

<span class="c">// curl -X POST -F name=john -F pass=doe http://localhost:3000</span>

<span class="c">// curl -X POST "http://localhost:3000/?name=john&amp;pass=doe"</span>
</code></pre></div></div> <h2 id="clearcookie"> <a href="#clearcookie" aria-labelledby="clearcookie" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ClearCookie </h2> <p>Expire a client cookie (<em>or all cookies if left empty)</em></p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">ClearCookie</span><span class="p">(</span><span class="n">key</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Clears all cookies:</span>
  <span class="n">request</span><span class="o">.</span><span class="n">ClearCookie</span><span class="p">()</span>

  <span class="c">// Expire specific cookie by name:</span>
  <span class="n">request</span><span class="o">.</span><span class="n">ClearCookie</span><span class="p">(</span><span class="s">"user"</span><span class="p">)</span>

  <span class="c">// Expire multiple cookies by names:</span>
  <span class="n">request</span><span class="o">.</span><span class="n">ClearCookie</span><span class="p">(</span><span class="s">"token"</span><span class="p">,</span> <span class="s">"session"</span><span class="p">,</span> <span class="s">"track_id"</span><span class="p">,</span> <span class="s">"version"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="context"> <a href="#context" aria-labelledby="context" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Context </h2> <p>Returns context.Context that carries a deadline, a cancellation signal, and other values across API boundaries.</p> <p><strong>Signature</strong></p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span>
</code></pre></div></div> <h2 id="cookie"> <a href="#cookie" aria-labelledby="cookie" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cookie </h2> <p>Set cookie</p> <p><strong>Signature</strong></p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>request.Cookie(*Cookie)
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">Cookie</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">Name</span>     <span class="kt">string</span>
    <span class="n">Value</span>    <span class="kt">string</span>
    <span class="n">Path</span>     <span class="kt">string</span>
    <span class="n">Domain</span>   <span class="kt">string</span>
    <span class="n">Expires</span>  <span class="n">time</span><span class="o">.</span><span class="n">Time</span>
    <span class="n">Secure</span>   <span class="kt">bool</span>
    <span class="n">HTTPOnly</span> <span class="kt">bool</span>
    <span class="n">SameSite</span> <span class="kt">string</span> <span class="c">// lax, strict, none</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Create cookie</span>
  <span class="n">cookie</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">fiber</span><span class="o">.</span><span class="n">Cookie</span><span class="p">)</span>
  <span class="n">cookie</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="s">"john"</span>
  <span class="n">cookie</span><span class="o">.</span><span class="n">Value</span> <span class="o">=</span> <span class="s">"doe"</span>
  <span class="n">cookie</span><span class="o">.</span><span class="n">Expires</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">24</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Hour</span><span class="p">)</span>

  <span class="c">// Set cookie</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Cookie</span><span class="p">(</span><span class="n">cookie</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="cookies"> <a href="#cookies" aria-labelledby="cookies" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cookies </h2> <p>Get cookie value by key.</p> <p><strong>Signatures</strong></p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Cookies</span><span class="p">(</span><span class="n">key</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Get cookie by key:</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Cookies</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="c">// "john"</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="download"> <a href="#download" aria-labelledby="download" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download </h2> <p>Transfers the file from path as an <code class="language-plaintext highlighter-rouge">attachment</code>.</p> <p>Typically, browsers will prompt the user for download. By default, the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition</a> header <code class="language-plaintext highlighter-rouge">filename=</code> parameter is the file path (<em>this typically appears in the browser dialog</em>).</p> <p>Override this default with the <strong>filename</strong> parameter.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Download</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">filename</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">Download</span><span class="p">(</span><span class="s">"./files/report-12345.pdf"</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="c">// Pass err to EVO</span>
  <span class="p">}</span>
  <span class="c">// =&gt; Download report-12345.pdf</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">Download</span><span class="p">(</span><span class="s">"./files/report-12345.pdf"</span><span class="p">,</span> <span class="s">"report.pdf"</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="c">// Pass err to EVO</span>
  <span class="p">}</span>
  <span class="c">// =&gt; Download report.pdf</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="fasthttp"> <a href="#fasthttp" aria-labelledby="fasthttp" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fasthttp </h2> <p>You can still <strong>access</strong> and use all <strong>Fasthttp</strong> methods and properties.</p> <p><strong>Signature</strong></p> <p>Please read the <a href="https://pkg.go.dev/github.com/valyala/fasthttp?tab=doc">Fasthttp Documentation</a> for more information.</p> <p><strong>Example</strong></p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Fasthttp</span><span class="o">.</span><span class="n">Request</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Method</span><span class="p">()</span>
  <span class="c">// =&gt; []byte("GET")</span>

  <span class="n">request</span><span class="o">.</span><span class="n">Fasthttp</span><span class="o">.</span><span class="n">Response</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">))</span>
  <span class="c">// =&gt; "Hello, World!"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="error"> <a href="#error" aria-labelledby="error" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Error </h2> <p>This contains the error information that thrown by a panic or passed via <code class="language-plaintext highlighter-rouge">Next</code> method.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Error</span><span class="p">()</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Setup</span><span class="p">()</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/api/register"</span><span class="p">,</span> <span class="k">func</span> <span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">User</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
      <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/api/user"</span><span class="p">,</span> <span class="k">func</span> <span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">User</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
      <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="s">"/api/update"</span><span class="p">,</span> <span class="k">func</span> <span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">User</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
      <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Use</span><span class="p">(</span><span class="s">"/api"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">500</span><span class="p">)</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
  <span class="p">})</span>
  <span class="n">evo</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="format"> <a href="#format" aria-labelledby="format" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Format </h2> <p>Performs content-negotiation on the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">Accept</a> HTTP header. It uses <a href="ctx.md#accepts">Accepts</a> to select a proper format.</p> <p>If the header is <strong>not</strong> specified or there is <strong>no</strong> proper format, <strong>text/plain</strong> is used.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Format</span><span class="p">(</span><span class="n">body</span> <span class="k">interface</span><span class="p">{})</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Accept: text/plain</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Format</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
  <span class="c">// =&gt; Hello, World!</span>

  <span class="c">// Accept: text/html</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Format</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
  <span class="c">// =&gt; &lt;p&gt;Hello, World!&lt;/p&gt;</span>

  <span class="c">// Accept: application/json</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Format</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
  <span class="c">// =&gt; "Hello, World!"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="formfile"> <a href="#formfile" aria-labelledby="formfile" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> FormFile </h2> <p>MultipartForm files can be retrieved by name, the <strong>first</strong> file from the given key is returned.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">FormFile</span><span class="p">(</span><span class="n">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">multipart</span><span class="o">.</span><span class="n">FileHeader</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Get first file from form field "document":</span>
  <span class="n">file</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">FormFile</span><span class="p">(</span><span class="s">"document"</span><span class="p">)</span>

  <span class="c">// Check for errors:</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="c">// Save file to root directory:</span>
    <span class="n">request</span><span class="o">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"./%s"</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Filename</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="formvalue"> <a href="#formvalue" aria-labelledby="formvalue" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> FormValue </h2> <p>Any form values can be retrieved by name, the <strong>first</strong> value from the given key is returned.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">FormValue</span><span class="p">(</span><span class="n">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Get first value from form field "name":</span>
  <span class="n">request</span><span class="o">.</span><span class="n">FormValue</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span>
  <span class="c">// =&gt; "john" or "" if not exist</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="fresh"> <a href="#fresh" aria-labelledby="fresh" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fresh </h2> <p><a href="https://expressjs.com/en/4x/api.html#req.fresh">https://expressjs.com/en/4x/api.html#req.fresh</a></p> <p>Not implemented yet, pull requests are welcome!</p> <h2 id="get"> <a href="#get" aria-labelledby="get" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get </h2> <p>Returns the HTTP request header specified by field.</p> <p>The match is <strong>case-insensitive</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">field</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">)</span> <span class="c">// "text/plain"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"CoNtEnT-TypE"</span><span class="p">)</span> <span class="c">// "text/plain"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"something"</span><span class="p">)</span>    <span class="c">// ""</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="hostname"> <a href="#hostname" aria-labelledby="hostname" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hostname </h2> <p>Contains the hostname derived from the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host">Host</a> HTTP header.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Hostname</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://google.com/search</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Hostname</span><span class="p">()</span> <span class="c">// "google.com"</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="ip"> <a href="#ip" aria-labelledby="ip" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IP </h2> <p>Returns the remote IP address of the request.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">IP</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">IP</span><span class="p">()</span> <span class="c">// "127.0.0.1"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="ips"> <a href="#ips" aria-labelledby="ips" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IPs </h2> <p>Returns an array of IP addresses specified in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For">X-Forwarded-For</a> request header.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">IPs</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// X-Forwarded-For: proxy1, 127.0.0.1, proxy3</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">IPs</span><span class="p">()</span> <span class="c">// ["proxy1", "127.0.0.1", "proxy3"]</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="is"> <a href="#is" aria-labelledby="is" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Is </h2> <p>Returns the matching <strong>content type</strong>, if the incoming request’s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a> HTTP header field matches the <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME type</a> specified by the type parameter.</p> <p>If the request has <strong>no</strong> body, it returns <strong>false</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Is</span><span class="p">(</span><span class="n">t</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Content-Type: text/html; charset=utf-8</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Is</span><span class="p">(</span><span class="s">"html"</span><span class="p">)</span>  <span class="c">// true</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Is</span><span class="p">(</span><span class="s">".html"</span><span class="p">)</span> <span class="c">// true</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Is</span><span class="p">(</span><span class="s">"json"</span><span class="p">)</span>  <span class="c">// false</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="json"> <a href="#json" aria-labelledby="json" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JSON </h2> <p>Converts any <strong>interface</strong> or <strong>string</strong> to JSON using <a href="https://github.com/json-iterator/go">Jsoniter</a>.</p> <p>JSON also sets the content header to <strong>application/json</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">v</span> <span class="k">interface</span><span class="p">{})</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">SomeStruct</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">Name</span> <span class="kt">string</span>
  <span class="n">Age</span>  <span class="kt">uint8</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/json"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Create data struct:</span>
  <span class="n">data</span> <span class="o">:=</span> <span class="n">SomeStruct</span><span class="p">{</span>
    <span class="n">Name</span><span class="o">:</span> <span class="s">"Grame"</span><span class="p">,</span>
    <span class="n">Age</span><span class="o">:</span>  <span class="m">20</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">500</span><span class="p">)</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="c">// =&gt; Content-Type: application/json</span>
  <span class="c">// =&gt; "{"Name": "Grame", "Age": 20}"</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span>
    <span class="s">"name"</span><span class="o">:</span> <span class="s">"Grame"</span><span class="p">,</span>
    <span class="s">"age"</span><span class="o">:</span> <span class="m">20</span><span class="p">,</span>
  <span class="p">});</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">500</span><span class="p">)</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="c">// =&gt; Content-Type: application/json</span>
  <span class="c">// =&gt; "{"name": "Grame", "age": 20}"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="jsonp"> <a href="#jsonp" aria-labelledby="jsonp" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JSONP </h2> <p>Sends a JSON response with JSONP support. This method is identical to <a href="ctx.md#json">JSON</a>, except that it opts-in to JSONP callback support. By default, the callback name is simply callback.</p> <p>Override this by passing a <strong>named string</strong> in the method.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">JSONP</span><span class="p">(</span><span class="n">v</span> <span class="k">interface</span><span class="p">{},</span> <span class="n">callback</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">SomeStruct</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">name</span> <span class="kt">string</span>
  <span class="n">age</span>  <span class="kt">uint8</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Create data struct:</span>
  <span class="n">data</span> <span class="o">:=</span> <span class="n">SomeStruct</span><span class="p">{</span>
    <span class="n">name</span><span class="o">:</span> <span class="s">"Grame"</span><span class="p">,</span>
    <span class="n">age</span><span class="o">:</span>  <span class="m">20</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">request</span><span class="o">.</span><span class="n">JSONP</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="c">// =&gt; callback({"name": "Grame", "age": 20})</span>

  <span class="n">request</span><span class="o">.</span><span class="n">JSONP</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">"customFunc"</span><span class="p">)</span>
  <span class="c">// =&gt; customFunc({"name": "Grame", "age": 20})</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="links"> <a href="#links" aria-labelledby="links" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Links </h2> <p>Joins the links followed by the property to populate the response’s <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Headers/Link">Link</a> HTTP header field.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Links</span><span class="p">(</span><span class="n">link</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Link</span><span class="p">(</span>
    <span class="s">"http://api.example.com/users?page=2"</span><span class="p">,</span> <span class="s">"next"</span><span class="p">,</span>
    <span class="s">"http://api.example.com/users?page=5"</span><span class="p">,</span> <span class="s">"last"</span><span class="p">,</span>
  <span class="p">)</span>
  <span class="c">// Link: &lt;http://api.example.com/users?page=2&gt;; rel="next",</span>
  <span class="c">//       &lt;http://api.example.com/users?page=5&gt;; rel="last"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="locals"> <a href="#locals" aria-labelledby="locals" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Locals </h2> <p>Method that stores string variables scoped to the request and therefore available only to the routes that match the request.</p> <p>This is useful, if you want to pass some <strong>specific</strong> data to the next middleware.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Locals</span><span class="p">(</span><span class="n">key</span> <span class="kt">string</span><span class="p">,</span> <span class="n">value</span> <span class="o">...</span><span class="k">interface</span><span class="p">{})</span> <span class="k">interface</span><span class="p">{}</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Locals</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"admin"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>
<span class="p">})</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/admin"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">Locals</span><span class="p">(</span><span class="s">"user"</span><span class="p">)</span> <span class="o">==</span> <span class="s">"admin"</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">200</span><span class="p">)</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="s">"Welcome, admin!"</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">SendStatus</span><span class="p">(</span><span class="m">403</span><span class="p">)</span>
    <span class="c">// =&gt; 403 Forbidden</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="location"> <a href="#location" aria-labelledby="location" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Location </h2> <p>Sets the response <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Headers/Location">Location</a> HTTP header to the specified path parameter.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Location</span><span class="p">(</span><span class="n">path</span> <span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Location</span><span class="p">(</span><span class="s">"http://example.com"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Location</span><span class="p">(</span><span class="s">"/foo/bar"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="method"> <a href="#method" aria-labelledby="method" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Method </h2> <p>Contains a string corresponding to the HTTP method of the request: <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">PUT</code> and so on.<br /> Optionally, you could override the method by passing a string.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Method</span><span class="p">(</span><span class="n">override</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Method</span><span class="p">()</span> <span class="c">// "POST"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="multipartform"> <a href="#multipartform" aria-labelledby="multipartform" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MultipartForm </h2> <p>To access multipart form entries, you can parse the binary with <code class="language-plaintext highlighter-rouge">MultipartForm()</code>. This returns a <code class="language-plaintext highlighter-rouge">map[string][]string</code>, so given a key the value will be a string slice.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">MultipartForm</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="n">multipart</span><span class="o">.</span><span class="n">Form</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Parse the multipart form:</span>
  <span class="k">if</span> <span class="n">form</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">MultipartForm</span><span class="p">();</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="c">// =&gt; *multipart.Form</span>

    <span class="k">if</span> <span class="n">token</span> <span class="o">:=</span> <span class="n">form</span><span class="o">.</span><span class="n">Value</span><span class="p">[</span><span class="s">"token"</span><span class="p">];</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">{</span>
      <span class="c">// Get key value:</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">token</span><span class="p">[</span><span class="m">0</span><span class="p">])</span>
    <span class="p">}</span>

    <span class="c">// Get all files from "documents" key:</span>
    <span class="n">files</span> <span class="o">:=</span> <span class="n">form</span><span class="o">.</span><span class="n">File</span><span class="p">[</span><span class="s">"documents"</span><span class="p">]</span>
    <span class="c">// =&gt; []*multipart.FileHeader</span>

    <span class="c">// Loop through files:</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">files</span> <span class="p">{</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">Filename</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Size</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Header</span><span class="p">[</span><span class="s">"Content-Type"</span><span class="p">][</span><span class="m">0</span><span class="p">])</span>
      <span class="c">// =&gt; "tutorial.pdf" 360641 "application/pdf"</span>

      <span class="c">// Save the files to disk:</span>
      <span class="n">request</span><span class="o">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"./%s"</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Filename</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="next"> <a href="#next" aria-labelledby="next" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Next </h2> <p>When <strong>Next</strong> is called, it executes the next method in the stack that matches the current route. You can pass an error struct within the method for custom error handling.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span> <span class="o">...</span><span class="kt">error</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"1st route!"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>
<span class="p">})</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"*"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"2nd route!"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Some error"</span><span class="p">))</span>
<span class="p">})</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span> <span class="c">// =&gt; "Some error"</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"3rd route!"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="originalurl"> <a href="#originalurl" aria-labelledby="originalurl" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OriginalURL </h2> <p>Contains the original request URL.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">OriginalURL</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://example.com/search?q=something</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">OriginalURL</span><span class="p">()</span> <span class="c">// "/search?q=something"</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="params"> <a href="#params" aria-labelledby="params" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Params </h2> <p>Method can be used to get the route parameters.</p> <p>Defaults to empty string (<code class="language-plaintext highlighter-rouge">""</code>), if the param <strong>doesn’t</strong> exist.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Params</span><span class="p">(</span><span class="n">param</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://example.com/user/fenny</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/user/:name"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Params</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="c">// "fenny"</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a>__</p> </blockquote> <h2 id="path"> <a href="#path" aria-labelledby="path" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Path </h2> <p>Contains the path part of the request URL. Optionally, you could override the path by passing a string.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">override</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://example.com/users?sort=desc</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span> <span class="c">// "/users"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="protocol"> <a href="#protocol" aria-labelledby="protocol" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Protocol </h2> <p>Contains the request protocol string: <code class="language-plaintext highlighter-rouge">http</code> or <code class="language-plaintext highlighter-rouge">https</code> for <strong>TLS</strong> requests.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Protocol</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://example.com</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Protocol</span><span class="p">()</span> <span class="c">// "http"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="query"> <a href="#query" aria-labelledby="query" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Query </h2> <p>This property is an object containing a property for each query string parameter in the route.</p> <p>If there is <strong>no</strong> query string, it returns an <strong>empty string</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="n">parameter</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// GET http://example.com/shoes?order=desc&amp;brand=nike</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s">"order"</span><span class="p">)</span> <span class="c">// "desc"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s">"brand"</span><span class="p">)</span> <span class="c">// "nike"</span>
<span class="p">})</span>
</code></pre></div></div> <blockquote> <p><em>Returned value is only valid within the handler. Do not store any references.<br /> Make copies or use the</em> <a href="app.md#settings"><em><strong><code class="language-plaintext highlighter-rouge">Immutable</code></strong></em></a> <em>setting instead.</em> <a href="./#zero-allocation"><em>Read more…</em></a></p> </blockquote> <h2 id="range"> <a href="#range" aria-labelledby="range" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Range </h2> <p>An struct containg the type and a slice of ranges will be returned.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Range</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Range: bytes=500-700, 700-900</span>
<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">b</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">Range</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">Type</span> <span class="o">==</span> <span class="s">"bytes"</span> <span class="p">{</span>
      <span class="k">for</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">r</span><span class="o">.</span><span class="n">Ranges</span> <span class="p">{</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
      <span class="c">// [500, 700]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="redirect"> <a href="#redirect" aria-labelledby="redirect" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Redirect </h2> <p>Redirects to the URL derived from the specified path, with specified status, a positive integer that corresponds to an HTTP status code.</p> <p>If <strong>not</strong> specified, status defaults to <strong>302 Found</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Redirect</span><span class="p">(</span><span class="n">path</span> <span class="kt">string</span><span class="p">,</span> <span class="n">status</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">"/foo/bar"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">"../login"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">"http://example.com"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">"http://example.com"</span><span class="p">,</span> <span class="m">301</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="route"> <a href="#route" aria-labelledby="route" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Route </h2> <p>Contains the matched <a href="https://pkg.go.dev/github.com/gofiber/fiber?tab=doc#Route">Route</a> struct.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Route</span><span class="p">()</span> <span class="o">*</span><span class="n">Route</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// http://localhost:8080/hello</span>

<span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/hello"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">r</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">Route</span><span class="p">()</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">Method</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Params</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Regexp</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Handler</span><span class="p">)</span>
<span class="p">})</span>

<span class="n">request</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/:api?"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Route</span><span class="p">()</span>
  <span class="c">// =&gt; {GET /hello [] nil 0x7b49e0}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="savefile"> <a href="#savefile" aria-labelledby="savefile" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SaveFile </h2> <p>Method is used to save <strong>any</strong> multipart file to disk.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">fh</span> <span class="o">*</span><span class="n">multipart</span><span class="o">.</span><span class="n">FileHeader</span><span class="p">,</span> <span class="n">path</span> <span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Post</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Parse the multipart form:</span>
  <span class="k">if</span> <span class="n">form</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">MultipartForm</span><span class="p">();</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="c">// =&gt; *multipart.Form</span>

    <span class="c">// Get all files from "documents" key:</span>
    <span class="n">files</span> <span class="o">:=</span> <span class="n">form</span><span class="o">.</span><span class="n">File</span><span class="p">[</span><span class="s">"documents"</span><span class="p">]</span>
    <span class="c">// =&gt; []*multipart.FileHeader</span>

    <span class="c">// Loop through files:</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">files</span> <span class="p">{</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">Filename</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Size</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Header</span><span class="p">[</span><span class="s">"Content-Type"</span><span class="p">][</span><span class="m">0</span><span class="p">])</span>
      <span class="c">// =&gt; "tutorial.pdf" 360641 "application/pdf"</span>

      <span class="c">// Save the files to disk:</span>
      <span class="n">request</span><span class="o">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"./%s"</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">Filename</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="secure"> <a href="#secure" aria-labelledby="secure" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Secure </h2> <p>A boolean property, that is <code class="language-plaintext highlighter-rouge">true</code> , if a <strong>TLS</strong> connection is established.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Secure</span><span class="p">()</span> <span class="kt">bool</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Secure() method is equivalent to:</span>
<span class="n">request</span><span class="o">.</span><span class="n">Protocol</span><span class="p">()</span> <span class="o">==</span> <span class="s">"https"</span>
</code></pre></div></div> <h2 id="send"> <a href="#send" aria-labelledby="send" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Send </h2> <p>Sets the HTTP response body. The <strong>Send</strong> body can be of any type.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="n">body</span> <span class="o">...</span><span class="k">interface</span><span class="p">{})</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>         <span class="c">// =&gt; "Hello, World!"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">))</span> <span class="c">// =&gt; "Hello, World!"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>                     <span class="c">// =&gt; 123</span>
<span class="p">})</span>
</code></pre></div></div> <p>EVO also provides <code class="language-plaintext highlighter-rouge">SendBytes</code> ,<code class="language-plaintext highlighter-rouge">SendString</code> and <code class="language-plaintext highlighter-rouge">SendStream</code> methods for raw inputs.</p> <p>Use this, if you <strong>don’t need</strong> type assertion, recommended for <strong>faster</strong> performance.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">SendBytes</span><span class="p">(</span><span class="n">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">SendString</span><span class="p">(</span><span class="n">s</span> <span class="kt">string</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">SendStream</span><span class="p">(</span><span class="n">r</span> <span class="n">io</span><span class="o">.</span><span class="n">Reader</span><span class="p">,</span> <span class="n">s</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">SendByte</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">))</span>
  <span class="c">// =&gt; "Hello, World!"</span>

  <span class="n">request</span><span class="o">.</span><span class="n">SendString</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
  <span class="c">// =&gt; "Hello, World!"</span>
  
  <span class="n">request</span><span class="o">.</span><span class="n">SendStream</span><span class="p">(</span><span class="n">bytes</span><span class="o">.</span><span class="n">NewReader</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)))</span>
  <span class="c">// =&gt; "Hello, World!"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="sendfile"> <a href="#sendfile" aria-labelledby="sendfile" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SendFile </h2> <p>Transfers the file from the given path. Sets the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a> response HTTP header field based on the <strong>filenames</strong> extension.</p> <p>Method use <strong>gzipping</strong> by default, set it to <strong>true</strong> to disable.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">SendFile</span><span class="p">(</span><span class="n">path</span> <span class="kt">string</span><span class="p">,</span> <span class="n">compress</span> <span class="o">...</span><span class="kt">bool</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/not-found"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">SendFile</span><span class="p">(</span><span class="s">"./public/404.html"</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="c">// pass err to ErrorHandler</span>
  <span class="p">}</span>

  <span class="c">// Enable compression</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">SendFile</span><span class="p">(</span><span class="s">"./static/index.html"</span><span class="p">,</span> <span class="no">true</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">request</span><span class="o">.</span><span class="n">Next</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="c">// pass err to ErrorHandler</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="sendstatus"> <a href="#sendstatus" aria-labelledby="sendstatus" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SendStatus </h2> <p>Sets the status code and the correct status message in the body, if the response body is <strong>empty</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">SendStatus</span><span class="p">(</span><span class="n">status</span> <span class="kt">int</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/not-found"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">SendStatus</span><span class="p">(</span><span class="m">415</span><span class="p">)</span>
  <span class="c">// =&gt; 415 "Unsupported Media Type"</span>

  <span class="n">request</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">SendStatus</span><span class="p">(</span><span class="m">415</span><span class="p">)</span>
  <span class="c">// =&gt; 415 "Hello, World!"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="set"> <a href="#set" aria-labelledby="set" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set </h2> <p>Sets the response’s HTTP header field to the specified <code class="language-plaintext highlighter-rouge">key</code>, <code class="language-plaintext highlighter-rouge">value</code>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">)</span>
  <span class="c">// =&gt; "Content-type: text/plain"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="stale"> <a href="#stale" aria-labelledby="stale" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Stale </h2> <p><a href="https://expressjs.com/en/4x/api.html#req.fresh">https://expressjs.com/en/4x/api.html#req.fresh</a></p> <p>Not implemented yet, pull requests are welcome!</p> <h2 id="status"> <a href="#status" aria-labelledby="status" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Status </h2> <p>Sets the HTTP status for the response.</p> <p>Method is a <strong>chainable</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="n">status</span> <span class="kt">int</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">200</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">400</span><span class="p">)</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="s">"Bad Request"</span><span class="p">)</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="m">404</span><span class="p">)</span><span class="o">.</span><span class="n">SendFile</span><span class="p">(</span><span class="s">"./public/gopher.png"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="subdomains"> <a href="#subdomains" aria-labelledby="subdomains" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Subdomains </h2> <p>An array of subdomains in the domain name of the request.</p> <p>The application property subdomain offset, which defaults to <code class="language-plaintext highlighter-rouge">2</code>, is used for determining the beginning of the subdomain segments.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Subdomains</span><span class="p">(</span><span class="n">offset</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="p">[]</span><span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Host: "tobi.ferrets.example.com"</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Subdomains</span><span class="p">()</span>  <span class="c">// ["ferrets", "tobi"]</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Subdomains</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="c">// ["tobi"]</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="type"> <a href="#type" aria-labelledby="type" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type </h2> <p>Sets the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a> HTTP header to the MIME type listed <a href="https://github.com/nginx/nginx/blob/master/conf/mime.types">here</a> specified by the file <strong>extension</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="n">t</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="s">".html"</span><span class="p">)</span> <span class="c">// =&gt; "text/html"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="s">"html"</span><span class="p">)</span>  <span class="c">// =&gt; "text/html"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="s">"json"</span><span class="p">)</span>  <span class="c">// =&gt; "application/json"</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="s">"png"</span><span class="p">)</span>   <span class="c">// =&gt; "image/png"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="vary"> <a href="#vary" aria-labelledby="vary" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vary </h2> <p>Adds the given header field to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Vary">Vary</a> response header. This will append the header, if not already listed, otherwise leaves it listed in the current location.</p> <p>Multiple fields are <strong>allowed</strong>.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Vary</span><span class="p">(</span><span class="n">field</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Vary</span><span class="p">(</span><span class="s">"Origin"</span><span class="p">)</span>     <span class="c">// =&gt; Vary: Origin</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Vary</span><span class="p">(</span><span class="s">"User-Agent"</span><span class="p">)</span> <span class="c">// =&gt; Vary: Origin, User-Agent</span>

  <span class="c">// No duplicates</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Vary</span><span class="p">(</span><span class="s">"Origin"</span><span class="p">)</span> <span class="c">// =&gt; Vary: Origin, User-Agent</span>

  <span class="n">request</span><span class="o">.</span><span class="n">Vary</span><span class="p">(</span><span class="s">"Accept-Encoding"</span><span class="p">,</span> <span class="s">"Accept"</span><span class="p">)</span>
  <span class="c">// =&gt; Vary: Origin, User-Agent, Accept-Encoding, Accept</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="write"> <a href="#write" aria-labelledby="write" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Write </h2> <p>Appends <strong>any</strong> input to the HTTP body response.</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">body</span> <span class="o">...</span><span class="k">interface</span><span class="p">{})</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"Hello, "</span><span class="p">)</span>         <span class="c">// =&gt; "Hello, "</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"World! "</span><span class="p">))</span> <span class="c">// =&gt; "Hello, World! "</span>
  <span class="n">request</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>               <span class="c">// =&gt; "Hello, World! 123"</span>
<span class="p">})</span>
</code></pre></div></div> <h2 id="xhr"> <a href="#xhr" aria-labelledby="xhr" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> XHR </h2> <p>A Boolean property, that is <code class="language-plaintext highlighter-rouge">true</code>, if the request’s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">X-Requested-With</a> header field is <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a>, indicating that the request was issued by a client library (such as <a href="https://api.jquery.com/jQuery.ajax/">jQuery</a>).</p> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="n">XHR</span><span class="p">()</span> <span class="kt">bool</span>
</code></pre></div></div> <div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// X-Requested-With: XMLHttpRequest</span>

<span class="n">app</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">request</span> <span class="o">*</span><span class="n">evo</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">request</span><span class="o">.</span><span class="n">XHR</span><span class="p">()</span> <span class="c">// true</span>
<span class="p">})</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
